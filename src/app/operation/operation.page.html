<ion-header>
  <ion-toolbar>
    <ion-title>operation</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content mode="ios">
  <ion-segment mode="md" color="warning" [(ngModel)]="messageTable">
    <ion-segment-button [value]="attention">
      <ion-label>Need attention</ion-label>
    </ion-segment-button>
    <ion-segment-button [value]="order">
      <ion-label>Order</ion-label>
    </ion-segment-button>
  </ion-segment>

  <div *ngIf="messageTable == attention">
    <ng-container *ngIf="cancelRequestOrderinfo$ | async as data">
      <ion-card color="light" *ngFor="let item of data" [routerLink]="['operation-order-detail', item._id]">
        <ion-item button color="light" class="ion-text-center">
          <ion-col size="4">
            <ion-text color="primary">
              <p><b>OrderID : {{item._id}}</b></p>
            </ion-text>
          </ion-col>
          <ion-col size="4" class="ion-text-left">
            <!-- <ion-text color="success">
              <p *ngIf="(!item?.acceptRequestDate) && (!item?.shippingDate) && (!item?.destinationDate) && (!item?.doneDate)"><b>สถานะ : ลูกค้าสั่งอาหาร</b></p>
              <p *ngIf="(item?.acceptRequestDate) && (item?.createDate)"><b>สถานะ : รับออเดอร์ </b></p>
              <p *ngIf="(item?.acceptRequestDate) && (item?.createDate) && (item?.shippingDate)"><b>สถานะ : อยู่ระหว่างจัดส่ง </b></p>
              <p *ngIf="(item?.acceptRequestDate) && (item?.createDate) && (item?.shippingDate) && (item?.destinationDate)"><b>สถานะ : ของถึงแล้ว </b></p>
              <p *ngIf="(item?.acceptRequestDate) && (item?.createDate) && (item?.shippingDate) && (item?.destinationDate) && (item?.doneDate)"><b>สถานะ : ลูกค้าได้รับของแล้ว </b></p>
            </ion-text> -->

               <ion-text color="success">
                <p><b>Driver Name {{item.delivery.name}}</b></p>
                <p *ngIf="status = 'createDate'"><b>สถานะ : ลูกค้าสั่งอาหาร</b></p>
                <p *ngIf="status = 'acceptRequestDate'"><b>สถานะ : รับออเดอร์ </b></p>
                <p *ngIf="status = 'shippingDate'"><b>สถานะ : อยู่ระหว่างจัดส่ง </b></p>
                <p *ngIf="status = 'destinationDate'"><b>สถานะ : ของถึงแล้ว </b></p>
                <p *ngIf="status = 'doneDate'"><b>สถานะ : ลูกค้าได้รับของแล้ว </b></p>
              </ion-text>
          </ion-col>
          <ion-col size="4">
            <ion-text color="primary">
              <p><b>{{item.createDate | date:'d MMM y (H:mm)'}}</b></p>
            </ion-text>
          </ion-col>
        </ion-item>
      </ion-card>

      <ion-card color="light" class="ion-text-center" *ngIf="!data || data.length == 0">
        <br>
        <br>
        <br>
        <br>
        <br>
        <ion-text class="ion-text-center" color="primary">
          <h5>
            <b>
              ไม่มีรายการ
            </b>
          </h5>
        </ion-text>
        <br>
        <br>
        <br>
        <br>
        <br>
      </ion-card>
    </ng-container>
  </div>

  <div *ngIf="messageTable == order">
    <ng-container *ngIf="unFinishedOrderinfo$ | async as data">
      <ion-card color="light" *ngFor="let item of data"  [routerLink]="['operation-order-detail', item._id]">
        <ion-card-header class="ion-no-padding ion-padding-horizontal ion-margin-top">
          <ion-label>
            <ion-item lines="none" color="light">
              <ion-label>
                <h1><b>OrderID : {{item._id}}</b></h1>
                <ion-text color="warning">
                  <h3>{{item.commissionPrice.number}}{{item.commissionPrice.amountUnit}} (2 รายการ ยังไม่ได้ binding)
                  </h3>
                </ion-text>
              </ion-label>
              <ion-label>
                <ion-note slot="end" class="ion-text-end">
                  <ion-text color="dark">
                    <h3>
                      <ion-icon name="time-outline"></ion-icon> {{ item.createDate | date:'d MMM y (H:mm)' }}
                    </h3>
                    <br>
                  </ion-text>
                </ion-note>
              </ion-label>
            </ion-item>
          </ion-label>
        </ion-card-header>
        <ion-list>
          <ion-item color="light">
            <ion-avatar slot="start">
              <img
                src="https://image.shutterstock.com/image-vector/cartoon-cute-squid-bowtie-vector-260nw-740611582.jpg" />
            </ion-avatar>
            <ion-label>
              <h3><b>{{item.restaurant.name}}</b></h3>
              <ion-text color="secondary">
                <p class="ion-text-wrap">{{item.restaurant.address}}</p>
              </ion-text>
            </ion-label>
          </ion-item>

          <ion-item color="light">
            <ion-avatar slot="start">
              <img
                src="https://image.shutterstock.com/image-vector/cartoon-cute-squid-bowtie-vector-260nw-740611582.jpg" />
            </ion-avatar>
            <ion-label>
              <h3><b>{{item.customer.name}}</b></h3>
              <ion-text color="secondary">
                <p class="ion-text-wrap">{{item.customer.address}}</p>
              </ion-text>
            </ion-label>
          </ion-item>
          <ion-item color="light" lines="none">
            <ion-avatar slot="start">
            </ion-avatar>
            <ion-avatar slot="start">
              <img
                src="https://image.shutterstock.com/image-vector/cartoon-cute-squid-bowtie-vector-260nw-740611582.jpg" />
            </ion-avatar>
            <ion-label>
              <!-- <ion-text>
                <h3><b>Driver Name {{item.delivery.name}}</b></h3>
                <h3 *ngIf="(!item?.acceptRequestDate) && (!item?.shippingDate) && (!item?.destinationDate) && (!item?.doneDate)"><b>สถานะ : ลูกค้าสั่งอาหาร</b></h3>
                <h3 *ngIf="(item?.acceptRequestDate) && (item?.createDate)"><b>สถานะ : รับออเดอร์ </b></h3>
                <h3 *ngIf="(item?.acceptRequestDate) && (item?.createDate) && (item?.shippingDate)"><b>สถานะ : อยู่ระหว่างจัดส่ง </b></h3>
                <h3 *ngIf="(item?.acceptRequestDate) && (item?.createDate) && (item?.shippingDate) && (item?.destinationDate)"><b>สถานะ : ของถึงแล้ว </b></h3>
                <h3 *ngIf="(item?.acceptRequestDate) && (item?.createDate) && (item?.shippingDate) && (item?.destinationDate) && (item?.doneDate)"><b>สถานะ : ลูกค้าได้รับของแล้ว </b></h3>
              </ion-text> -->

              <ion-text>
                <h3><b>Driver Name {{item.delivery.name}}</b></h3>
                <h3 *ngIf="status = 'createDate'"><b>สถานะ : ลูกค้าสั่งอาหาร</b></h3>
                <h3 *ngIf="status = 'acceptRequestDate'"><b>สถานะ : รับออเดอร์ </b></h3>
                <h3 *ngIf="status = 'shippingDate'"><b>สถานะ : อยู่ระหว่างจัดส่ง </b></h3>
                <h3 *ngIf="status = 'destinationDate'"><b>สถานะ : ของถึงแล้ว </b></h3>
                <h3 *ngIf="status = 'doneDate'"><b>สถานะ : ลูกค้าได้รับของแล้ว </b></h3>
              </ion-text>
            </ion-label>
          </ion-item>
        </ion-list>
        <br>
      </ion-card>

      <ion-card color="light" class="ion-text-center" *ngIf="!data || data.length == 0">
        <br>
        <br>
        <br>
        <br>
        <br>
        <ion-text class="ion-text-center" color="primary">
          <h5>
            <b>
              ไม่มีรายการ
            </b>
          </h5>
        </ion-text>
        <br>
        <br>
        <br>
        <br>
        <br>
      </ion-card>
    </ng-container>
  </div>
</ion-content>